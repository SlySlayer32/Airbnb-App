---
description: TypeScript definitions and interface patterns
globs: ["types/**/*.ts", "**/*.d.ts"]
alwaysApply: false
---

# TypeScript Type Definitions

## Type Definition Rules

- Define all interfaces in `/types/index.ts`
- Use descriptive property names that match business concepts
- Include status enums for workflow states
- Add optional properties with `?` for non-required fields
- Use string literal types for constrained values
- Annotate each interface with a comment stating which Supabase table it maps to and any RLS assumptions
- Keep derived/computed properties separate from persisted columns (suffix with `Display` or `Summary`)

## Standard Interface Pattern

```typescript
export interface BusinessEntity {
  id: string;
  created_at: string;
  updated_at: string;
  
  // Business properties
  name: string;
  description?: string;
  status: 'active' | 'inactive' | 'pending';
  
  // Relations
  owner_id: string;
  assigned_user_id?: string;
  
  // Optional metadata
  metadata?: Record<string, any>;
}
```

## Key Domain Types

```typescript
// User roles
type UserRole = 'property_owner' | 'cleaner' | 'co_host';

type DashboardRole = UserRole | 'all';

// Session status flow
type SessionStatus = 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled';

type CancellationNoticeCategory = 'on_time' | 'short_notice';

// Notification priorities
type NotificationPriority = 'urgent' | 'high' | 'normal';

// Property status
type PropertyStatus = 'active' | 'occupied' | 'maintenance' | 'inactive';

// Maintenance severity
type MaintenanceSeverity = 'low' | 'medium' | 'high' | 'urgent';
```

## Component Props Pattern

```typescript
interface ComponentNameProps {
  // Required data
  data: EntityType;
  role: UserRole;
  
  // Required callbacks
  onPress: () => void;
  onEdit?: (id: string) => void;
  
  // Optional UI state
  loading?: boolean;
  disabled?: boolean;
  
  // Style overrides
  style?: ViewStyle;
}
```

## Service Return Types

```typescript
// Always use Promise<T> for async operations
interface ServiceInterface {
  getData: (filters?: FilterType) => Promise<EntityType[]>;
  createItem: (data: Omit<EntityType, 'id'>) => Promise<EntityType>;
  updateItem: (id: string, updates: Partial<EntityType>) => Promise<EntityType>;
  deleteItem: (id: string) => Promise<void>;
}
```

## Business Logic Types

```typescript
// Cleaning session workflow
interface CleaningSession {
  id: string;
  property_id: string;
  assigned_cleaner_id?: string;
  guest_count: number;
  checkin_time: string;
  checkout_time: string;
  scheduled_cleaning_time: string;
  session_type: 'checkout_clean' | 'checkin_prep' | 'maintenance_clean';
  status: SessionStatus;
  
  // Cancellation tracking
  cancelled_at?: string;
  cancellation_reason?: string;
  cancellation_notice_hours?: number;
  
  // Progress tracking
  cleaner_arrived_at?: string;
  cleaner_completed_at?: string;
  actual_guest_count?: number;
}

// Linen requirements calculation
interface LinenRequirement {
  guest_count: number;
  bed_sheets_single: number;
  bed_sheets_double: number;
  bed_sheets_queen: number;
  bed_sheets_king: number;
  pillow_cases: number;
  towels_bath: number;
  towels_hand: number;
  towels_face: number;
  kitchen_towels: number;
  bath_mats: number;
}
```

## Type Guards

```typescript
// Type guard functions
export const isPropertyOwner = (role: string): role is 'property_owner' => {
  return role === 'property_owner';
};

export const isCleaningSession = (obj: any): obj is CleaningSession => {
  return obj && typeof obj.id === 'string' && typeof obj.property_id === 'string';
};
```

## Utility Types

```typescript
// Common utility types
type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;
type RequiredFields<T, K extends keyof T> = T & Required<Pick<T, K>>;

// Example usage
type CreateProperty = Optional<Property, 'id' | 'created_at' | 'updated_at'>;
type UpdateProperty = Partial<Property>;
```

## Enum Patterns

```typescript
// Use const assertions for better type inference
export const SessionStatus = {
  SCHEDULED: 'scheduled',
  CONFIRMED: 'confirmed',
  IN_PROGRESS: 'in_progress',
  COMPLETED: 'completed',
  CANCELLED: 'cancelled'
} as const;

export type SessionStatus = typeof SessionStatus[keyof typeof SessionStatus];
```

## API Response Types

```typescript
// Standard API response wrapper
interface ApiResponse<T> {
  data: T;
  error: string | null;
  success: boolean;
}

// Paginated response
interface PaginatedResponse<T> {
  data: T[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    hasMore: boolean;
  };
}
```

## Form Data Types

```typescript
// Form state management
interface FormState<T> {
  data: T;
  errors: Partial<Record<keyof T, string>>;
  isSubmitting: boolean;
  isDirty: boolean;
}

// Form validation
interface ValidationRule<T> {
  field: keyof T;
  validator: (value: any) => string | null;
  required?: boolean;
}
```